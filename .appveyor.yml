version: '{build}'
image: Visual Studio 2015
platform:
  -x64
environment:
  global:
    DISTUTILS_USE_SDK: 1
    PYTHONWARNINGS: ignore:DEPRECATION
    MSSdk: 1
install:
  - cmd: '"C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\Tools\\..\..\VC\vcvarsall.bat" x64'
  - ps: C:\Python37-x64\python.exe -m pip install setuptools wheel cmake
build_script:
  - ps: |
      $env:path = "C:\Python37-x64;C:\Python37-x64\Scripts"
      cd solnp
      python.exe setup.py sdist bdist_wheel
      pip install ./
      cd ..
artifacts:
  - path: sonlp\dist\*.whl
    name: wheels